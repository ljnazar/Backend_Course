<div class="container">
    {{#if isAdmin}}
        <div class="jumbotron d-flex justify-content-between my-3" style="border: 2px solid; background-color: #eee; color: black;">
            <h4 class="ps-3 pt-1">
                Administrador: {{ user }} 
                <button id="btnAdminUsers" class="p-2 ms-3 mt-1 btn btn-primary">Administrar usuarios</button>
            </h4>
            <button class="p-2 btn btn-danger" onclick="location.href='/logout'">LOGOUT</button>
        </div>
        <h4 class="fw-bolder text-center pt-2 mb-4 mt-5">Perfil de administrador</h4>
        <button id="btnAddProduct" class="mb-2 btn btn-primary">Agregar producto</button>
    {{else}}
        <div class="jumbotron d-flex justify-content-between my-3" style="border: 2px solid; background-color: #eee; color: black;">
            <h4 class="ps-3 pt-1">
                Usuario: {{ user }} 
            </h4>
            <div>
                <button id="btnCart" class="p-2 me-3 btn btn-primary">Carrito</button>
                <button class="p-2 btn btn-danger" onclick="location.href='/logout'">LOGOUT</button>
            </div>
        </div>
        <h4 class="fw-bolder text-center ps-3 my-5">Productos destacados</h4>
    {{/if}}
    <section style="background-color: #eee;">
        <div class="container py-5">
            <div class="row">
                {{#if isAdmin}}
                    {{#each products}}
                        <div id="idProduct{{@index}}" class="d-none">{{ _id }}</div>
                        <div class="col-xl-3 col-lg-4 col-md-6 col-ms-12">
                            <div class="card mb-2">
                                <div id="thumbnailDiv">
                                    <img id="thumbnail" src={{ thumbnail }} class="card-img-top" alt="Img" />
                                </div>
                                <div class="card-body">
                                    <div id="titleDiv" class=" d-flex justify-content-center">
                                        <h6 id="title">{{ title }}</h6>
                                    </div>
                                    <div id="categoryDiv">
                                        <p class="small"><a href="#" id="category" class="text-muted ">{{ category }}</a></p>
                                    </div>
                                    <div id="descriptionDiv" class="mb-2">
                                        <h6 id="description">{{ description }}</h6>
                                    </div>
                                    <div id="stockAndPriceDiv" class="d-flex justify-content-between mb-3">
                                        <div id="stockDiv">
                                            <p class="text-muted mb-0">stock: <span id="stock" class="fw-bold">{{ stock }}</span></p>
                                        </div>
                                        <div id="priceDiv">
                                            <h6 class="text-dark mb-0" id="price">${{ price }}</h6>
                                        </div>
                                    </div>
                                    <div id="buttonsDiv" class="d-flex justify-content-center">
                                        <button class="ms-3" id="btnModifyProduct" data-product-index="{{@index}}">MODIFICAR</button>
                                        <button class="ms-3" id="btnRemoveProduct" data-product-index="{{@index}}">ELIMINAR</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {{/each}}
                {{else}}
                    {{#each products}}
                        <div id="idProduct{{@index}}" class="d-none">{{ _id }}</div>
                        <div class="col-xl-3 col-lg-4 col-md-6 col-ms-12">
                            <div class="card mb-2">
                                <img src={{ thumbnail }} class="card-img-top" alt="Img" />
                                <div class="card-body">
                                    <div class=" d-flex justify-content-center">
                                        <h6>{{ title }}</h6>
                                    </div>
                                    <div class="">
                                        <p class="small"><a href="#" class="text-muted ">{{ category }}</a></p>
                                    </div>
                                    <div class="mb-2">
                                        <h6>{{ description }}</h6>
                                    </div>
                                    <div class="d-flex justify-content-between mb-3">
                                        <p class="text-muted mb-0">stock: <span id="stockSpan" class="fw-bold">{{ stock }}</span></p>
                                        <h6 class="text-dark mb-0">${{ price }}</h6>
                                    </div>
                                    <div class="d-flex justify-content-center">
                                        <div>
                                            <button id="btnSubstract{{@index}}">-</button>
                                            <span id="counterSpan{{@index}}">0</span>
                                            <button id="btnPlus{{@index}}">+</button>
                                        </div>
                                        <button class="ms-3" id="btnAddToCart" data-product-index="{{@index}}">AGREGAR AL CARRITO</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {{/each}}
                {{/if}}
            </div>
        </div>
    </section>
</div>
{{#if isAdmin}}
    <script src="/js/homeAdmin.js"></script>
{{else}}
    <script src="/js/homeUser.js"></script>
{{/if}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.7.12/sweetalert2.all.min.js"></script>
